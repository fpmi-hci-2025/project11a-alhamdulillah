<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>API сети ресторанов «Махачкала»</title>
    <link rel="stylesheet" href="https://unpkg.com/swagger-ui-dist@5.9.0/swagger-ui.css">
</head>
<body>
    <div id="swagger-ui"></div>
    
    <script id="openapi-spec" type="application/json">
{"openapi": "3.0.3", "info": {"title": "API сети ресторанов «Махачкала»", "description": "REST API для веб- и мобильного приложения сети ресторанов «Махачкала». Поддерживает управление пользователями, ресторанами, меню, акциями и заказами.", "contact": {"name": "Команда Alhamdulillah", "url": "https://github.com/fpmi-hci-2025/project11a-alhamdulillah"}, "version": "1.0.0"}, "externalDocs": {"description": "Документация проекта", "url": "https://fpmi-hci-2025.github.io/project11a-alhamdulillah/"}, "servers": [{"url": "https://virtserver.swaggerhub.com/ads-1bb/laba/1.0.0", "description": "SwaggerHub API Auto Mocking"}, {"url": "https://api.makhachkala.local/v1", "description": "Основной сервер (продакшен)"}, {"url": "https://mockapi.swaggerhub.com/fpmi-hci-2025/makhachkala-api/1.0.0", "description": "Mock-сервер для тестирования"}], "security": [{"BearerAuth": []}], "tags": [{"name": "Аутентификация", "description": "Регистрация, вход, управление токенами"}, {"name": "Пользователи", "description": "Управление профилями пользователей"}, {"name": "Рестораны", "description": "Точки сети «Махачкала»"}, {"name": "Меню", "description": "Блюда и категории"}, {"name": "Акции", "description": "Специальные предложения и промо-акции"}, {"name": "Заказы", "description": "Создание и управление заказами"}, {"name": "Позиции заказа", "description": "Элементы заказа"}], "paths": {"/auth/register": {"post": {"tags": ["Аутентификация"], "summary": "Регистрация нового пользователя", "description": "Создаёт учётную запись пользователя (клиент, администратор, курьер)", "operationId": "registerUser", "requestBody": {"content": {"application/json": {"schema": {"$ref": "#/components/schemas/RegisterRequest"}, "example": {"name": "Артем", "phone": "+375291234567", "password": "SecurePass123", "role": "client"}}}, "required": true}, "responses": {"201": {"description": "Пользователь успешно зарегистрирован", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/AuthResponse"}}}}, "400": {"description": "Ошибка валидации данных", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/Error"}}}}, "409": {"description": "Пользователь с таким телефоном или email уже существует", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/Error"}}}}}}}, "/auth/login": {"post": {"tags": ["Аутентификация"], "summary": "Вход в систему", "description": "Аутентификация пользователя по телефону и паролю", "operationId": "loginUser", "requestBody": {"content": {"application/json": {"schema": {"$ref": "#/components/schemas/LoginRequest"}, "example": {"phone": "+375291234567", "password": "SecurePass123"}}}, "required": true}, "responses": {"200": {"description": "Успешный вход", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/AuthResponse"}}}}, "401": {"description": "Неверные учетные данные", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/Error"}}}}}}}, "/users/me": {"get": {"tags": ["Пользователи"], "summary": "Получить свой профиль", "description": "Возвращает информацию о текущем аутентифицированном пользователе", "operationId": "getCurrentUser", "responses": {"200": {"description": "Успешный запрос", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/User"}}}}, "401": {"$ref": "#/components/responses/UnauthorizedError"}}, "security": [{"BearerAuth": []}]}, "put": {"tags": ["Пользователи"], "summary": "Обновить свой профиль", "description": "Обновляет информацию текущего пользователя", "operationId": "updateCurrentUser", "requestBody": {"content": {"application/json": {"schema": {"$ref": "#/components/schemas/UserUpdate"}}}, "required": true}, "responses": {"200": {"description": "Профиль обновлен", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/User"}}}}, "400": {"$ref": "#/components/responses/ValidationError"}, "401": {"$ref": "#/components/responses/UnauthorizedError"}}, "security": [{"BearerAuth": []}]}}, "/users/{id}": {"get": {"tags": ["Пользователи"], "summary": "Получить пользователя по ID", "description": "Только для администраторов", "operationId": "getUserById", "parameters": [{"name": "id", "in": "path", "description": "ID пользователя", "required": true, "schema": {"type": "integer"}}], "responses": {"200": {"description": "Успешный запрос", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/User"}}}}, "401": {"$ref": "#/components/responses/UnauthorizedError"}, "403": {"$ref": "#/components/responses/ForbiddenError"}, "404": {"$ref": "#/components/responses/NotFoundError"}}, "security": [{"BearerAuth": []}]}}, "/restaurants": {"get": {"tags": ["Рестораны"], "summary": "Получить список ресторанов", "description": "Возвращает список всех ресторанов с возможностью фильтрации", "operationId": "getRestaurants", "parameters": [{"name": "nearby", "in": "query", "description": "Координаты для поиска ближайших (формат \"широта,долгота\")", "required": false, "schema": {"type": "string"}}, {"name": "status", "in": "query", "description": "Фильтр по статусу", "required": false, "schema": {"type": "string", "enum": ["open", "closed"]}}], "responses": {"200": {"description": "Успешный запрос", "content": {"application/json": {"schema": {"type": "array", "items": {"$ref": "#/components/schemas/Restaurant"}}}}}}}, "post": {"tags": ["Рестораны"], "summary": "Создать новый ресторан", "description": "Только для администраторов", "operationId": "createRestaurant", "requestBody": {"content": {"application/json": {"schema": {"$ref": "#/components/schemas/RestaurantCreate"}}}, "required": true}, "responses": {"201": {"description": "Ресторан создан", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/Restaurant"}}}}, "400": {"$ref": "#/components/responses/ValidationError"}, "401": {"$ref": "#/components/responses/UnauthorizedError"}, "403": {"$ref": "#/components/responses/ForbiddenError"}}, "security": [{"BearerAuth": []}]}}, "/restaurants/{id}": {"get": {"tags": ["Рестораны"], "summary": "Получить ресторан по ID", "operationId": "getRestaurantById", "parameters": [{"name": "id", "in": "path", "required": true, "schema": {"type": "integer"}}], "responses": {"200": {"description": "Успешный запрос", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/Restaurant"}}}}, "404": {"$ref": "#/components/responses/NotFoundError"}}}, "put": {"tags": ["Рестораны"], "summary": "Обновить ресторан", "description": "Только для администраторов", "operationId": "updateRestaurant", "parameters": [{"name": "id", "in": "path", "required": true, "schema": {"type": "integer"}}], "requestBody": {"content": {"application/json": {"schema": {"$ref": "#/components/schemas/RestaurantUpdate"}}}, "required": true}, "responses": {"200": {"description": "Ресторан обновлен", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/Restaurant"}}}}, "400": {"$ref": "#/components/responses/ValidationError"}, "401": {"$ref": "#/components/responses/UnauthorizedError"}, "403": {"$ref": "#/components/responses/ForbiddenError"}, "404": {"$ref": "#/components/responses/NotFoundError"}}, "security": [{"BearerAuth": []}]}, "delete": {"tags": ["Рестораны"], "summary": "Удалить ресторан", "description": "Только для администраторов", "operationId": "deleteRestaurant", "parameters": [{"name": "id", "in": "path", "required": true, "schema": {"type": "integer"}}], "responses": {"204": {"description": "Ресторан удален"}, "401": {"$ref": "#/components/responses/UnauthorizedError"}, "403": {"$ref": "#/components/responses/ForbiddenError"}, "404": {"$ref": "#/components/responses/NotFoundError"}}, "security": [{"BearerAuth": []}]}}, "/dishes": {"get": {"tags": ["Меню"], "summary": "Получить список блюд", "description": "Возвращает меню с возможностью фильтрации по ресторану, категории и акциям", "operationId": "getDishes", "parameters": [{"name": "restaurant_id", "in": "query", "description": "Фильтр по ресторану", "required": false, "schema": {"type": "integer"}}, {"name": "category", "in": "query", "description": "Фильтр по категории (шаурма, напитки, закуски)", "required": false, "schema": {"type": "string"}}, {"name": "promotion_id", "in": "query", "description": "Фильтр по акции", "required": false, "schema": {"type": "integer"}}], "responses": {"200": {"description": "Успешный запрос", "content": {"application/json": {"schema": {"type": "array", "items": {"$ref": "#/components/schemas/Dish"}}}}}}}, "post": {"tags": ["Меню"], "summary": "Создать новое блюдо", "description": "Только для администраторов", "operationId": "createDish", "requestBody": {"content": {"application/json": {"schema": {"$ref": "#/components/schemas/DishCreate"}}}, "required": true}, "responses": {"201": {"description": "Блюдо создано", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/Dish"}}}}, "400": {"$ref": "#/components/responses/ValidationError"}, "401": {"$ref": "#/components/responses/UnauthorizedError"}, "403": {"$ref": "#/components/responses/ForbiddenError"}}, "security": [{"BearerAuth": []}]}}, "/dishes/{id}": {"get": {"tags": ["Меню"], "summary": "Получить блюдо по ID", "operationId": "getDishById", "parameters": [{"name": "id", "in": "path", "required": true, "schema": {"type": "integer"}}], "responses": {"200": {"description": "Успешный запрос", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/Dish"}}}}, "404": {"$ref": "#/components/responses/NotFoundError"}}}, "put": {"tags": ["Меню"], "summary": "Обновить блюдо", "description": "Только для администраторов", "operationId": "updateDish", "parameters": [{"name": "id", "in": "path", "required": true, "schema": {"type": "integer"}}], "requestBody": {"content": {"application/json": {"schema": {"$ref": "#/components/schemas/DishUpdate"}}}, "required": true}, "responses": {"200": {"description": "Блюдо обновлено", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/Dish"}}}}, "400": {"$ref": "#/components/responses/ValidationError"}, "401": {"$ref": "#/components/responses/UnauthorizedError"}, "403": {"$ref": "#/components/responses/ForbiddenError"}, "404": {"$ref": "#/components/responses/NotFoundError"}}, "security": [{"BearerAuth": []}]}, "delete": {"tags": ["Меню"], "summary": "Удалить блюдо", "description": "Только для администраторов", "operationId": "deleteDish", "parameters": [{"name": "id", "in": "path", "required": true, "schema": {"type": "integer"}}], "responses": {"204": {"description": "Блюдо удалено"}, "401": {"$ref": "#/components/responses/UnauthorizedError"}, "403": {"$ref": "#/components/responses/ForbiddenError"}, "404": {"$ref": "#/components/responses/NotFoundError"}}, "security": [{"BearerAuth": []}]}}, "/promotions": {"get": {"tags": ["Акции"], "summary": "Получить список акций", "operationId": "getPromotions", "responses": {"200": {"description": "Успешный запрос", "content": {"application/json": {"schema": {"type": "array", "items": {"$ref": "#/components/schemas/Promotion"}}}}}}}, "post": {"tags": ["Акции"], "summary": "Создать новую акцию", "description": "Только для администраторов", "operationId": "createPromotion", "requestBody": {"content": {"application/json": {"schema": {"$ref": "#/components/schemas/PromotionCreate"}}}, "required": true}, "responses": {"201": {"description": "Акция создана", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/Promotion"}}}}, "400": {"$ref": "#/components/responses/ValidationError"}, "401": {"$ref": "#/components/responses/UnauthorizedError"}, "403": {"$ref": "#/components/responses/ForbiddenError"}}, "security": [{"BearerAuth": []}]}}, "/promotions/{id}": {"get": {"tags": ["Акции"], "summary": "Получить акцию по ID", "operationId": "getPromotionById", "parameters": [{"name": "id", "in": "path", "required": true, "schema": {"type": "integer"}}], "responses": {"200": {"description": "Успешный запрос", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/Promotion"}}}}, "404": {"$ref": "#/components/responses/NotFoundError"}}}, "put": {"tags": ["Акции"], "summary": "Обновить акцию", "description": "Только для администраторов", "operationId": "updatePromotion", "parameters": [{"name": "id", "in": "path", "required": true, "schema": {"type": "integer"}}], "requestBody": {"content": {"application/json": {"schema": {"$ref": "#/components/schemas/PromotionUpdate"}}}, "required": true}, "responses": {"200": {"description": "Акция обновлена", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/Promotion"}}}}, "400": {"$ref": "#/components/responses/ValidationError"}, "401": {"$ref": "#/components/responses/UnauthorizedError"}, "403": {"$ref": "#/components/responses/ForbiddenError"}, "404": {"$ref": "#/components/responses/NotFoundError"}}, "security": [{"BearerAuth": []}]}, "delete": {"tags": ["Акции"], "summary": "Удалить акцию", "description": "Только для администраторов", "operationId": "deletePromotion", "parameters": [{"name": "id", "in": "path", "required": true, "schema": {"type": "integer"}}], "responses": {"204": {"description": "Акция удалена"}, "401": {"$ref": "#/components/responses/UnauthorizedError"}, "403": {"$ref": "#/components/responses/ForbiddenError"}, "404": {"$ref": "#/components/responses/NotFoundError"}}, "security": [{"BearerAuth": []}]}}, "/orders": {"get": {"tags": ["Заказы"], "summary": "Получить список заказов", "description": "- Для клиентов: возвращает только свои заказы\n- Для администраторов: можно фильтровать по restaurant_id\n- Для курьеров: можно фильтровать по courier_id и статусу\n", "operationId": "getOrders", "parameters": [{"name": "restaurant_id", "in": "query", "required": false, "schema": {"type": "integer"}}, {"name": "status", "in": "query", "required": false, "schema": {"type": "string", "enum": ["new", "preparing", "delivering", "completed", "cancelled"]}}, {"name": "courier_id", "in": "query", "required": false, "schema": {"type": "integer"}}], "responses": {"200": {"description": "Успешный запрос", "content": {"application/json": {"schema": {"type": "array", "items": {"$ref": "#/components/schemas/Order"}}}}}, "401": {"$ref": "#/components/responses/UnauthorizedError"}, "403": {"$ref": "#/components/responses/ForbiddenError"}}, "security": [{"BearerAuth": []}]}, "post": {"tags": ["Заказы"], "summary": "Создать новый заказ", "description": "Только для клиентов", "operationId": "createOrder", "requestBody": {"content": {"application/json": {"schema": {"$ref": "#/components/schemas/OrderCreate"}}}, "required": true}, "responses": {"201": {"description": "Заказ создан", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/Order"}}}}, "400": {"$ref": "#/components/responses/ValidationError"}, "401": {"$ref": "#/components/responses/UnauthorizedError"}, "403": {"$ref": "#/components/responses/ForbiddenError"}}, "security": [{"BearerAuth": []}]}}, "/orders/{id}": {"get": {"tags": ["Заказы"], "summary": "Получить заказ по ID", "description": "Доступно владельцу заказа, администратору ресторана или назначенному курьеру", "operationId": "getOrderById", "parameters": [{"name": "id", "in": "path", "required": true, "schema": {"type": "integer"}}], "responses": {"200": {"description": "Успешный запрос", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/Order"}}}}, "401": {"$ref": "#/components/responses/UnauthorizedError"}, "403": {"$ref": "#/components/responses/ForbiddenError"}, "404": {"$ref": "#/components/responses/NotFoundError"}}, "security": [{"BearerAuth": []}]}, "put": {"tags": ["Заказы"], "summary": "Обновить заказ", "description": "- Администраторы: могут обновлять любой заказ в своём ресторане\n- Курьеры: могут обновлять статус заказа (только delivering → completed)\n", "operationId": "updateOrder", "parameters": [{"name": "id", "in": "path", "required": true, "schema": {"type": "integer"}}], "requestBody": {"content": {"application/json": {"schema": {"$ref": "#/components/schemas/OrderUpdate"}}}, "required": true}, "responses": {"200": {"description": "Заказ обновлен", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/Order"}}}}, "400": {"$ref": "#/components/responses/ValidationError"}, "401": {"$ref": "#/components/responses/UnauthorizedError"}, "403": {"$ref": "#/components/responses/ForbiddenError"}, "404": {"$ref": "#/components/responses/NotFoundError"}}, "security": [{"BearerAuth": []}]}}, "/orders/{id}/pay": {"post": {"tags": ["Заказы"], "summary": "Оплатить заказ", "description": "Симуляция оплаты (в тестовом режиме)", "operationId": "payOrder", "parameters": [{"name": "id", "in": "path", "required": true, "schema": {"type": "integer"}}], "responses": {"200": {"description": "Оплата прошла успешно", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/Order"}}}}, "400": {"description": "Заказ уже оплачен или отменен"}, "401": {"$ref": "#/components/responses/UnauthorizedError"}, "403": {"$ref": "#/components/responses/ForbiddenError"}, "404": {"$ref": "#/components/responses/NotFoundError"}}, "security": [{"BearerAuth": []}]}}, "/orders/{id}/complete": {"put": {"tags": ["Заказы"], "summary": "Отметить заказ как доставленный", "description": "Только для курьеров", "operationId": "completeOrder", "parameters": [{"name": "id", "in": "path", "required": true, "schema": {"type": "integer"}}], "responses": {"200": {"description": "Статус обновлен на \"completed\"", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/Order"}}}}, "400": {"description": "Невозможно отметить как доставленный (неправильный статус)"}, "401": {"$ref": "#/components/responses/UnauthorizedError"}, "403": {"$ref": "#/components/responses/ForbiddenError"}, "404": {"$ref": "#/components/responses/NotFoundError"}}, "security": [{"BearerAuth": []}]}}, "/orders/{id}/items": {"get": {"tags": ["Позиции заказа"], "summary": "Получить позиции заказа", "description": "Возвращает все позиции указанного заказа", "operationId": "getOrderItems", "parameters": [{"name": "id", "in": "path", "required": true, "schema": {"type": "integer"}}], "responses": {"200": {"description": "Успешный запрос", "content": {"application/json": {"schema": {"type": "array", "items": {"$ref": "#/components/schemas/OrderItem"}}}}}, "401": {"$ref": "#/components/responses/UnauthorizedError"}, "403": {"$ref": "#/components/responses/ForbiddenError"}, "404": {"$ref": "#/components/responses/NotFoundError"}}, "security": [{"BearerAuth": []}]}, "post": {"tags": ["Позиции заказа"], "summary": "Добавить позицию в заказ", "description": "Только если заказ в статусе \"new\"", "operationId": "addOrderItem", "parameters": [{"name": "id", "in": "path", "required": true, "schema": {"type": "integer"}}], "requestBody": {"content": {"application/json": {"schema": {"$ref": "#/components/schemas/OrderItemCreate"}}}, "required": true}, "responses": {"201": {"description": "Позиция добавлена", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/OrderItem"}}}}, "400": {"description": "Невозможно добавить позицию (заказ уже готовится)"}, "401": {"$ref": "#/components/responses/UnauthorizedError"}, "403": {"$ref": "#/components/responses/ForbiddenError"}, "404": {"$ref": "#/components/responses/NotFoundError"}}, "security": [{"BearerAuth": []}]}}, "/orders/{id}/items/{item_id}": {"delete": {"tags": ["Позиции заказа"], "summary": "Удалить позицию из заказа", "description": "Только если заказ в статусе \"new\"", "operationId": "deleteOrderItem", "parameters": [{"name": "id", "in": "path", "required": true, "schema": {"type": "integer"}}, {"name": "item_id", "in": "path", "required": true, "schema": {"type": "integer"}}], "responses": {"204": {"description": "Позиция удалена"}, "400": {"description": "Невозможно удалить позицию"}, "401": {"$ref": "#/components/responses/UnauthorizedError"}, "403": {"$ref": "#/components/responses/ForbiddenError"}, "404": {"$ref": "#/components/responses/NotFoundError"}}, "security": [{"BearerAuth": []}]}}}, "components": {"schemas": {"Error": {"type": "object", "properties": {"error": {"type": "string", "example": "Invalid credentials"}, "message": {"type": "string", "example": "Phone or password is incorrect"}, "details": {"type": "array", "items": {"$ref": "#/components/schemas/Error_details"}}}}, "RegisterRequest": {"required": ["name", "password", "phone"], "type": "object", "properties": {"name": {"maxLength": 100, "minLength": 2, "type": "string", "example": "Артем"}, "phone": {"pattern": "^\\+?[1-9]\\d{1,14}$", "type": "string", "example": "+375291234567"}, "password": {"minLength": 6, "type": "string", "example": "SecurePass123"}, "role": {"type": "string", "example": "client", "default": "client", "enum": ["client", "admin", "courier"]}, "email": {"type": "string", "format": "email", "nullable": true, "example": "artem@example.com"}}}, "LoginRequest": {"required": ["password", "phone"], "type": "object", "properties": {"phone": {"type": "string", "example": "+375291234567"}, "password": {"type": "string", "example": "SecurePass123"}}}, "AuthResponse": {"type": "object", "properties": {"token": {"type": "string", "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."}, "user": {"$ref": "#/components/schemas/User"}}}, "User": {"type": "object", "properties": {"id": {"type": "integer", "example": 1}, "name": {"type": "string", "example": "Артем"}, "phone": {"type": "string", "example": "+375291234567"}, "email": {"type": "string", "nullable": true, "example": "artem@example.com"}, "role": {"type": "string", "example": "client", "enum": ["client", "admin", "courier"]}, "created_at": {"type": "string", "format": "date-time", "example": "2025-01-15T10:30:00+00:00"}}}, "UserUpdate": {"type": "object", "properties": {"name": {"maxLength": 100, "minLength": 2, "type": "string"}, "email": {"type": "string", "format": "email", "nullable": true}}}, "Restaurant": {"type": "object", "properties": {"id": {"type": "integer", "example": 1}, "name": {"type": "string", "example": "Махачкала на Ленина"}, "address": {"type": "string", "example": "ул. Ленина, д. 10, Минск"}, "latitude": {"type": "number", "format": "float", "example": 53.902284}, "longitude": {"type": "number", "format": "float", "example": 27.561831}, "schedule": {"type": "string", "example": "9:00-23:00"}, "status": {"type": "string", "example": "open", "enum": ["open", "closed"]}, "created_at": {"type": "string", "format": "date-time", "example": "2025-01-01T00:00:00+00:00"}}}, "RestaurantCreate": {"required": ["address", "name"], "type": "object", "properties": {"name": {"type": "string", "example": "Махачкала на Кирова"}, "address": {"type": "string", "example": "ул. Кирова, д. 5, Минск"}, "latitude": {"type": "number", "format": "float"}, "longitude": {"type": "number", "format": "float"}, "schedule": {"type": "string", "example": "9:00-23:00"}, "status": {"type": "string", "default": "open", "enum": ["open", "closed"]}}}, "RestaurantUpdate": {"type": "object", "properties": {"name": {"type": "string"}, "address": {"type": "string"}, "schedule": {"type": "string"}, "status": {"type": "string", "enum": ["open", "closed"]}}}, "Dish": {"type": "object", "properties": {"id": {"type": "integer", "example": 5}, "name": {"type": "string", "example": "Шаурма с курицей"}, "description": {"type": "string", "example": "Сочная шаурма с овощами и курицей"}, "price": {"type": "number", "format": "float", "example": 120}, "category": {"type": "string", "example": "шаурма"}, "image_url": {"type": "string", "format": "uri", "nullable": true, "example": "https://example.com/shawarma.jpg"}, "restaurant_id": {"type": "integer", "example": 1}, "promotion_id": {"type": "integer", "nullable": true, "example": 1}, "created_at": {"type": "string", "format": "date-time", "example": "2025-01-10T12:00:00+00:00"}}}, "DishCreate": {"required": ["name", "price", "restaurant_id"], "type": "object", "properties": {"name": {"type": "string", "example": "Шаурма с курицей"}, "description": {"type": "string"}, "price": {"minimum": 0, "type": "number", "format": "float", "example": 120}, "category": {"type": "string", "example": "шаурма"}, "image_url": {"type": "string", "format": "uri"}, "restaurant_id": {"type": "integer", "example": 1}, "promotion_id": {"type": "integer", "nullable": true}}}, "DishUpdate": {"type": "object", "properties": {"name": {"type": "string"}, "description": {"type": "string"}, "price": {"minimum": 0, "type": "number", "format": "float"}, "category": {"type": "string"}, "image_url": {"type": "string", "format": "uri"}, "promotion_id": {"type": "integer", "nullable": true}}}, "Promotion": {"type": "object", "properties": {"id": {"type": "integer", "example": 1}, "title": {"type": "string", "example": "Шаурма за 5 рублей"}, "description": {"type": "string", "example": "Акционная шаурма по специальной цене"}, "condition": {"type": "string", "example": "price = 5"}, "start_date": {"type": "string", "format": "date", "example": "2025-01-01"}, "end_date": {"type": "string", "format": "date", "example": "2025-12-31"}, "created_at": {"type": "string", "format": "date-time", "example": "2024-12-01T00:00:00+00:00"}}}, "PromotionCreate": {"required": ["end_date", "start_date", "title"], "type": "object", "properties": {"title": {"type": "string", "example": "Шаурма за 5 рублей"}, "description": {"type": "string"}, "condition": {"type": "string"}, "start_date": {"type": "string", "format": "date"}, "end_date": {"type": "string", "format": "date"}}}, "PromotionUpdate": {"type": "object", "properties": {"title": {"type": "string"}, "description": {"type": "string"}, "condition": {"type": "string"}, "start_date": {"type": "string", "format": "date"}, "end_date": {"type": "string", "format": "date"}}}, "Order": {"type": "object", "properties": {"id": {"type": "integer", "example": 42}, "user_id": {"type": "integer", "example": 1}, "restaurant_id": {"type": "integer", "example": 1}, "status": {"type": "string", "example": "new", "enum": ["new", "preparing", "delivering", "completed", "cancelled"]}, "payment_method": {"type": "string", "example": "card", "enum": ["card", "cash"]}, "total_amount": {"type": "number", "format": "float", "example": 130}, "delivery_address": {"type": "string", "example": "ул. Ленина, д. 10"}, "created_at": {"type": "string", "format": "date-time", "example": "2025-01-20T14:30:00+00:00"}, "completed_at": {"type": "string", "format": "date-time", "nullable": true}, "items": {"type": "array", "items": {"$ref": "#/components/schemas/OrderItem"}}}}, "OrderCreate": {"required": ["items", "restaurant_id"], "type": "object", "properties": {"restaurant_id": {"type": "integer", "example": 1}, "items": {"minItems": 1, "type": "array", "items": {"$ref": "#/components/schemas/OrderItemCreate"}}, "payment_method": {"type": "string", "default": "cash", "enum": ["card", "cash"]}, "delivery_address": {"type": "string", "example": "ул. Ленина, д. 10"}}}, "OrderUpdate": {"type": "object", "properties": {"status": {"type": "string", "enum": ["new", "preparing", "delivering", "completed", "cancelled"]}}}, "OrderItem": {"type": "object", "properties": {"id": {"type": "integer", "example": 101}, "order_id": {"type": "integer", "example": 42}, "dish_id": {"type": "integer", "example": 5}, "dish_name": {"type": "string", "example": "Шаурма с курицей"}, "quantity": {"type": "integer", "example": 1}, "price_at_order": {"type": "number", "format": "float", "example": 120}}}, "OrderItemCreate": {"required": ["dish_id", "quantity"], "type": "object", "properties": {"dish_id": {"type": "integer", "example": 5}, "quantity": {"minimum": 1, "type": "integer", "example": 1}}}, "Error_details": {"type": "object", "properties": {"field": {"type": "string"}, "message": {"type": "string"}}}}, "responses": {"UnauthorizedError": {"description": "Требуется аутентификация", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/Error"}, "example": {"error": "Unauthorized", "message": "Authentication token is missing or invalid"}}}}, "ForbiddenError": {"description": "Недостаточно прав для выполнения операции", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/Error"}, "example": {"error": "Forbidden", "message": "You don't have permission to access this resource"}}}}, "NotFoundError": {"description": "Ресурс не найден", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/Error"}, "example": {"error": "Not Found", "message": "Resource with ID 999 not found"}}}}, "ValidationError": {"description": "Ошибка валидации данных", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/Error"}, "example": {"error": "Validation Failed", "message": "Invalid input data", "details": [{"field": "phone", "message": "Invalid phone number format"}, {"field": "password", "message": "Password must be at least 6 characters"}]}}}}}, "parameters": {"PageParam": {"name": "page", "in": "query", "description": "Номер страницы для пагинации", "required": false, "schema": {"minimum": 1, "type": "integer", "default": 1}}, "LimitParam": {"name": "limit", "in": "query", "description": "Количество элементов на странице", "required": false, "schema": {"maximum": 100, "minimum": 1, "type": "integer", "default": 20}}}, "securitySchemes": {"BearerAuth": {"type": "http", "description": "Введите JWT-токен, полученный при регистрации или входе.\nФормат: `Bearer {token}`\n", "scheme": "bearer", "bearerFormat": "JWT"}}}}
    </script>
    
    <script src="https://unpkg.com/swagger-ui-dist@5.9.0/swagger-ui-bundle.js"></script>
    <script>
        const spec = JSON.parse(document.getElementById('openapi-spec').textContent);
        window.onload = function() {
            SwaggerUIBundle({
                spec: spec,
                dom_id: '#swagger-ui',
                deepLinking: true
            });
        };
    </script>
</body>
</html>