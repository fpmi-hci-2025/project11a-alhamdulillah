---
layout: page
title: API маршруты проекта
permalink: /api_routes
---

# Проектирование маршрутов и конечных точек в виде спецификации API


**1. Таблица соответствия сущностей, таблиц БД и маршрутов**

| Сущность       | Таблица БД    | Маршрут (базовый)          |
|----------------|--------------|----------------------------|
| Пользователь   | users        | /users                     |
| Ресторан       | restaurants  | /restaurants               |
| Блюдо          | dishes       | /dishes                    |
| Акция          | promotions   | /promotions                |
| Заказ          | orders       | /orders                    |
| Позиция заказа | order_items  | /orders/{id}/items         |
| Аутентификация | users        | /auth                      |

---

**2. Сопоставление вариантов использования с конечными точками**

| Актор                | Use Case                     | Маршрут                    | HTTP-метод | Аутентификация |
|----------------------|------------------------------|----------------------------|------------|----------------|
| Пользователь         | UC 0 Войти в систему         | /auth/login                | POST       | нет            |
| Пользователь         | UC 0.1 Регистрация           | /auth/register             | POST       | нет            |
| Пользователь         | UC 1.1 Просмотреть меню      | /dishes                    | GET        | нет            |
| Пользователь         | UC 1.2 Найти ближайший ресторан | /restaurants?nearby=... | GET        | нет            |
| Пользователь         | UC 1.3 Оформить заказ по акции | /orders                  | POST       | да (JWT)       |
| Пользователь         | UC 1.4 Отслеживать статус заказа | /orders/{id}            | GET        | да (JWT)       |
| Пользователь         | UC 1.5 Оплатить заказ        | /orders/{id}/pay           | POST       | да (JWT)       |
| Администратор        | UC 2.1 Управлять меню        | /dishes                    | POST, PUT, DELETE | да (JWT, роль admin) |
| Администратор        | UC 2.2 Просматривать заказы  | /orders?restaurant_id=...  | GET        | да (JWT, роль admin) |
| Администратор        | UC 2.3 Управлять акциями     | /promotions                | POST, PUT, DELETE | да (JWT, роль admin) |
| Курьер              | UC 3.1 Получать задания на доставку | /orders?status=preparing&courier_id=... | GET | да (JWT, роль courier) |
| Курьер              | UC 3.2 Отмечать выполнение заказа | /orders/{id}/complete   | PUT        | да (JWT, роль courier) |

---